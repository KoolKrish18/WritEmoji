var content=function(){"use strict";var P=Object.defineProperty;var F=(l,c,d)=>c in l?P(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var h=(l,c,d)=>F(l,typeof c!="symbol"?c+"":c,d);var T,_;function l(s){return s}const f={smile:"😊",skull:"💀",laugh:"😂",wink:"😉",thumbs_up:"👍",heart:"❤️",fire:"🔥",clap:"👏",star:"⭐",sun:"☀️",moon:"🌙",checkmark:"✔️",cross:"❌",rocket:"🚀",coffee:"☕",apple:"🍎",banana:"🍌",pizza:"🍕",burger:"🍔",dog:"🐶",cat:"🐱",fish:"🐟",tree:"🌳",flower:"🌸",cloud:"☁️",rainbow:"🌈",car:"🚗",airplane:"✈️",phone:"📱",computer:"💻",book:"📖",clock:"⏰",camera:"📷",trophy:"🏆",medal:"🏅",soccer_ball:"⚽",basketball:"🏀",music_note:"🎵",guitar:"🎸",microphone:"🎤",game_controller:"🎮",gift:"🎁",party_popper:"🎉",balloon:"🎈"},k={matches:["<all_urls>"],main(){console.log("Content script running"),document.addEventListener("keyup",s=>{const t=document.activeElement;if(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){const e=t,n=e.value,o=n.match(/:(\w+):/);if(o){console.log("Detected text:",o[0]);const r=o[1];if(r in f){const i=f[r],a=n.replace(`:${r}:`,i);e.value=a;const u=a.indexOf(i)+i.length;e.setSelectionRange(u,u)}}}else if(t instanceof HTMLElement&&t.isContentEditable){const e=window.getSelection();if(!e||e.rangeCount===0)return;const n=e.getRangeAt(0),o=n.startContainer;if(o.nodeType===Node.TEXT_NODE){const r=o.textContent||"",i=r.match(/:(\w+):/);if(i){console.log("Detected text:",i[0]);const a=i[1];if(a in f){const u=f[a],S=r.replace(`:${a}:`,u);o.textContent=S;const M=S.indexOf(u)+u.length;n.setStart(o,M),n.collapse(!0),e.removeAllRanges(),e.addRange(n)}}}}}})}},m=((_=(T=globalThis.browser)==null?void 0:T.runtime)==null?void 0:_.id)==null?globalThis.chrome:globalThis.browser;function g(s,...t){}const K={debug:(...s)=>g(console.debug,...s),log:(...s)=>g(console.log,...s),warn:(...s)=>g(console.warn,...s),error:(...s)=>g(console.error,...s)},y=class y extends Event{constructor(t,e){super(y.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=e}};h(y,"EVENT_NAME",v("wxt:locationchange"));let w=y;function v(s){var t;return`${(t=m==null?void 0:m.runtime)==null?void 0:t.id}:content:${s}`}function I(s){let t,e;return{run(){t==null&&(e=new URL(location.href),t=s.setInterval(()=>{let n=new URL(location.href);n.href!==e.href&&(window.dispatchEvent(new w(n,e)),e=n)},1e3))}}}const p=class p{constructor(t,e){h(this,"isTopFrame",window.self===window.top);h(this,"abortController");h(this,"locationWatcher",I(this));this.contentScriptName=t,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return m.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,e){const n=setInterval(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(t,e){const n=setTimeout(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(t){const e=requestAnimationFrame((...n)=>{this.isValid&&t(...n)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(t,e){const n=requestIdleCallback((...o)=>{this.signal.aborted||t(...o)},e);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(t,e,n,o){var r;e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(r=t.addEventListener)==null||r.call(t,e.startsWith("wxt:")?v(e):e,n,{...o,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),K.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:p.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(t){let e=!0;const n=o=>{var r,i;if(((r=o.data)==null?void 0:r.type)===p.SCRIPT_STARTED_MESSAGE_TYPE&&((i=o.data)==null?void 0:i.contentScriptName)===this.contentScriptName){const a=e;if(e=!1,a&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}};h(p,"SCRIPT_STARTED_MESSAGE_TYPE",v("wxt:content-script-started"));let E=p;const N=Symbol("null");let x=0;class A extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[e,n]of t)this.set(e,n)}}_getPublicKeys(t,e=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const n=this._getPrivateKey(t,e);let o;return n&&this._publicKeys.has(n)?o=this._publicKeys.get(n):e&&(o=[...t],this._publicKeys.set(n,o)),{privateKey:n,publicKey:o}}_getPrivateKey(t,e=!1){const n=[];for(let o of t){o===null&&(o=N);const r=typeof o=="object"||typeof o=="function"?"_objectHashes":typeof o=="symbol"?"_symbolHashes":!1;if(!r)n.push(o);else if(this[r].has(o))n.push(this[r].get(o));else if(e){const i=`@@mkm-ref-${x++}@@`;this[r].set(o,i),n.push(i)}else return!1}return JSON.stringify(n)}set(t,e){const{publicKey:n}=this._getPublicKeys(t,!0);return super.set(n,e)}get(t){const{publicKey:e}=this._getPublicKeys(t);return super.get(e)}has(t){const{publicKey:e}=this._getPublicKeys(t);return super.has(e)}delete(t){const{publicKey:e,privateKey:n}=this._getPublicKeys(t);return!!(e&&super.delete(e)&&this._publicKeys.delete(n))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new A;function _t(){}function b(s,...t){}const C={debug:(...s)=>b(console.debug,...s),log:(...s)=>b(console.log,...s),warn:(...s)=>b(console.warn,...s),error:(...s)=>b(console.error,...s)};return(async()=>{try{const{main:s,...t}=k,e=new E("content",t);return await s(e)}catch(s){throw C.error('The content script "content" crashed on startup!',s),s}})()}();
content;
